# DB와 SQL
# 1. 데이터 모델링의 이해

## 1-1 데이터 모델링이란?
``데이터 모델링``이란 <b> 복잡한 데이터를 개체, 관계, 속성을 중심으로 단순화 시켜 DB로 옮기는 과정입니다.</b>

### 데이터 모델링의 특징
|특징|설명|
|---|---|
|추상화| 현실 세계를 간략히 표현한다.|
|단순화| 누구나 쉽게 이해하도록 표현한다.|
|명확화| 명확하게 한 가지 의미로 표현한다.|

### 모델링의 3가지 관점
|관점|특징|장점|단점|
|---|---|---|---|
|데이터|업무가 어떤 데이터와 관련이 있으며 무슨 관계인지에 대해 모델링|업무가 변경되어도 모델링 결과에는 큰 영향을 주지 않음|프로세스 모델링보단 다소 어려움|
|프로세스|업무에서 실제 하는 일은 무엇인지 또는 어떻게 해야하는지 모델링하는 방법|업무 분석이 잘되면 비교적 쉽고 편리함|해당 업무가 변경 및 삭제되면 모델링 결과에 영향이 있을 수 있음|
|상관|업무를 처리하는 방법에 따라 어떤 영향을 받는지에 대해 모델링|두 관점을 섞어서 하는 방법으로 검증을 위해 CRUD Matrix 방법을 사용함|

### 모델링의 3단계
추상화 수준에 따라 개념-논리-물리 3단계로 정의합니다.
- ``개념적 모델링``: 현실 세계의 데이터를 <b>추상화</b> 과정을 통해 개념 세계의 데이터로 표현하는 과정이며 <b>엔터티와 속성을 도출하고 개념적 ERD를 작성</b>하는 단계입니다.
- ``논리적 모델링``: DB의 논리적 파트로 변환시키는 과정입니다. <b>key, 관계, 속성 등을 모두 정의 및 표현</b>하는 단계입니다.
- ``물리적 모델링``: 데이터가 저장될 수 있도록 논리적 -> 물리적 구조로 변환시키는 과정입니다. 성능, 보안, 가용성 등을 고려하여 DB를 실제로 구축하는 단계로 테이블, 인덱스, 함수 등을 생성하는 단계입니다.

### ERD
테이블간 상관 관계를 그림으로 도식화한 것을 'ERD'라고 합니다. ERD의 구성 요소는 `` 엔터티 Entity``, ``관계 Relationship``, ``속성 Attribute ``로 3가지입니다.

<img src = "https://user-images.githubusercontent.com/72376781/158088632-2ab0596e-c0d1-42ca-95db-e8451d9f70bc.jpg" width = 500>

토트넘 team과 손흥민 player의 관계를 한 번 봅시다. 토트넘 team과 손흥민 player은 모두 엔터티 entity 에 해당되고 '소속'이라는 관계 relationship로 맺어져있습니다. 해당 테이블들을 다른 테이블들과도 어떤 의미의 연관성을 지닐 수 있습니다. 이처럼 ERD로 도식화한다면 관계의 의미를 직관적으로 볼 수 있다는 장점이 있습니다.

#### ERD의 작성 절차
1. 엔터티를 도출하고 그린다.
2. 엔터티 배치한다.
3. 엔터티간 관계 설정한다.
4. 관계 서술한다.
5. 관계 참여도를 표현한다.
6. 관계 필수 여부를 표현한다.

## Level Schema
사용자, 설계자, 개발자가 DB를 보는 관점에 따라 DB를 기술하고, 관계를 정리한 [ANSI 표준](https://velog.io/@gillog/ANSI-SQL%EC%9D%B4%EB%9E%80)으로 <b>DB의 독립성을 확보할 수 있는 방법</b>입니다.

> #### tip 데이터 독립성은 무엇이고, 왜 확보하나요?
데이터 독립성이란 <b>특정 스키마를 변경해도 상위 수준의 스키마 정의에 영향을 주지 않는 성질</b>입니다. 데이터 독립성을 확보하면 다음과 같은 효과를 얻을 수 있습니다.
- 데이터 복잡도 증가
- 데이터 중복 제거
- 사용자 요구사항 변경에 따른 대응력 향상
- 관리 및 유지보수 비용 절감
이러한 이유로 데이터 독립성을 확보합니다.

level schema는 다음 그림과 같이 이루어져 있습니다.

![level schema](https://user-images.githubusercontent.com/72376781/158091190-d0162e65-febe-4713-9e96-30e860348177.jpg)

1. 외부 스키마 external level
- 사용자 개개인, DB 이용자의 관점으로 구성된 개인적 DB 스키마
- 응용 프로그램에 접근하는 DB 정의
- 하나의 외부 스키마는 여럿이서 공유가 가능

2. 개념 스키마 conceptual level
- 설계자, 사용자 관점을 통합한 기관, 조직 전체 관점의 DB 구조
- 개념 단계 하나의 개념적 스키마로 구성되어 있으며 전체 DB내 규칙과 구조를 표현함

3. 내부 스키마 internal level
- 개발자와 저장장치 관점의 물리적 저장 구조
- 데이터 저장구조, 레코드 구조, 필드 정의, 인덱스 등을 의미
